# ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰ - ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ§‹æˆ

## ğŸ“‹ ç›®æ¬¡
1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ãƒ­ãƒ¼ã‚«ãƒ«PC ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ãƒ­ãƒ¼ã‚«ãƒ«pc-ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
3. [å‹•ä½œç¢ºèª](#å‹•ä½œç¢ºèª)
4. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Render (ã‚¯ãƒ©ã‚¦ãƒ‰) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… 24æ™‚é–“ãƒãƒ£ãƒ³ãƒãƒ«ç›£è¦–                          â”‚
â”‚ âœ… è¦‹ã©ã“ã‚æ¤œå‡ºï¼ˆAnalytics API v2ï¼‰              â”‚
â”‚ âœ… ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ç®¡ç†                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ APIé€šä¿¡
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ãƒ­ãƒ¼ã‚«ãƒ«PC â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… å‹•ç”»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰                              â”‚
â”‚ âœ… è¦‹ã©ã“ã‚ã‚¯ãƒªãƒƒãƒ—ä½œæˆ                          â”‚
â”‚ âœ… å­—å¹•ç”Ÿæˆ                                      â”‚
â”‚ âœ… Google Driveã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ­ãƒ¼ã‚«ãƒ«PC ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
# Windows
cd C:\Users\PC_User\Documents
git clone https://github.com/kyo10310415/Create-cut-out-videos.git
cd Create-cut-out-videos

# Mac/Linux
cd ~/Documents
git clone https://github.com/kyo10310415/Create-cut-out-videos.git
cd Create-cut-out-videos
```

### ã‚¹ãƒ†ãƒƒãƒ—2: FFmpegã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### Windows
1. https://www.gyan.dev/ffmpeg/builds/ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. `ffmpeg-release-essentials.zip` ã‚’è§£å‡
3. `bin` ãƒ•ã‚©ãƒ«ãƒ€ã‚’ `C:\ffmpeg\bin` ã«é…ç½®
4. ç’°å¢ƒå¤‰æ•° PATH ã« `C:\ffmpeg\bin` ã‚’è¿½åŠ 

ç¢ºèª:
```cmd
ffmpeg -version
```

#### Mac
```bash
brew install ffmpeg
```

#### Linux
```bash
sudo apt install ffmpeg
```

### ã‚¹ãƒ†ãƒƒãƒ—3: Pythonä»®æƒ³ç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Windows
python -m venv venv
venv\Scripts\activate
pip install -r requirements_worker.txt

# Mac/Linux
python3 -m venv venv
source venv/bin/activate
pip install -r requirements_worker.txt
```

### ã‚¹ãƒ†ãƒƒãƒ—4: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

```bash
# .env.worker.example ã‚’ã‚³ãƒ”ãƒ¼
copy .env.worker.example .env.worker  # Windows
cp .env.worker.example .env.worker    # Mac/Linux
```

`.env.worker` ã‚’ç·¨é›†ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰:
```env
RENDER_API_URL=https://create-cut-out-videos.onrender.com
WORKER_ID=local-worker-1
POLLING_INTERVAL=30
```

### ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’èµ·å‹•

```bash
# Windows
start_worker.bat

# Mac/Linux
chmod +x start_worker.sh
./start_worker.sh

# ã¾ãŸã¯ç›´æ¥å®Ÿè¡Œ
python local_worker.py  # Windows
python3 local_worker.py # Mac/Linux
```

---

## å‹•ä½œç¢ºèª

### ãƒ†ã‚¹ãƒˆ1: Renderã§ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ

1. https://create-cut-out-videos.onrender.com ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§å‹•ç”»IDã‚’å…¥åŠ›: `dQw4w9WgXcQ`
3. ã€ŒğŸ¬ ã“ã®å‹•ç”»ã‚’å‡¦ç†ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ã€Œè¦‹ã©ã“ã‚ã‚’æ¤œå‡ºã—ã€ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã—ã¾ã—ãŸã€ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°OK

### ãƒ†ã‚¹ãƒˆ2: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ãƒ­ã‚°ã‚’ç¢ºèª

ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™:

```
âœ… æ–°ã—ã„ã‚¿ã‚¹ã‚¯å–å¾— (#1)
====================================================================
ğŸ“‹ ã‚¿ã‚¹ã‚¯é–‹å§‹: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
ğŸ¬ å‹•ç”»: Rick Astley - Never Gonna Give You Up (Official Video)
ğŸ“Š è¦‹ã©ã“ã‚: 3å€‹
====================================================================

ğŸ“¥ å‹•ç”»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é–‹å§‹: Rick Astley - Never Gonna Give You Up...
âœ… å‹•ç”»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº†

ğŸ¬ è¦‹ã©ã“ã‚ã‚¯ãƒªãƒƒãƒ—ä½œæˆä¸­ï¼ˆ3å€‹ï¼‰...
  ğŸ“Œ ã‚¯ãƒªãƒƒãƒ— 1/3: 30ç§’ - 60ç§’
  ğŸ“Œ ã‚¯ãƒªãƒƒãƒ— 2/3: 120ç§’ - 150ç§’
  ğŸ“Œ ã‚¯ãƒªãƒƒãƒ— 3/3: 180ç§’ - 210ç§’
âœ… å…¨ã‚¯ãƒªãƒƒãƒ—ä½œæˆå®Œäº†ï¼ˆ3å€‹ï¼‰

ğŸ”— ã‚¯ãƒªãƒƒãƒ—çµåˆä¸­...
âœ… ã‚¯ãƒªãƒƒãƒ—çµåˆå®Œäº†

ğŸ“ å­—å¹•ç”Ÿæˆä¸­ï¼ˆWhisperã‚’ä½¿ç”¨ï¼‰...
âœ… æ–‡å­—èµ·ã“ã—å®Œäº†: 45ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ
âœ… å­—å¹•ç”Ÿæˆå®Œäº†

ğŸ“¤ å®Œäº†é€šçŸ¥é€ä¿¡ä¸­...

âœ… ã‚¿ã‚¹ã‚¯å®Œäº†: dQw4w9WgXcQ_Rick_Astley_Never_Gonna_Give_You_Up_highlight.mp4
====================================================================
```

### ãƒ†ã‚¹ãƒˆ3: å®Œæˆå‹•ç”»ã‚’ç¢ºèª

```bash
# Windowsã®å ´åˆ
explorer output

# Macã®å ´åˆ
open output

# Linuxã®å ´åˆ
xdg-open output
```

`output` ãƒ•ã‚©ãƒ«ãƒ€ã« `.mp4` ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ï¼

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q1: FFmpegãŒè¦‹ã¤ã‹ã‚‰ãªã„

**ã‚¨ãƒ©ãƒ¼**:
```
FileNotFoundError: [WinError 2] The system cannot find the file specified: 'ffmpeg'
```

**è§£æ±º**:
```bash
# FFmpegã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ç¢ºèª
ffmpeg -version

# PATHãŒé€šã£ã¦ã„ã‚‹ã‹ç¢ºèª
where ffmpeg  # Windows
which ffmpeg  # Mac/Linux
```

### Q2: Whisperã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¤±æ•—

**ã‚¨ãƒ©ãƒ¼**:
```
ERROR: Could not build wheels for openai-whisper
```

**è§£æ±º**:
```bash
# PyTorchã‚’å…ˆã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install torch torchaudio --index-url https://download.pytorch.org/whl/cpu

# ãã®å¾ŒWhisperã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install openai-whisper
```

### Q3: ã‚¿ã‚¹ã‚¯ãŒå–å¾—ã§ããªã„

**ç—‡çŠ¶**: ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒã€Œã‚¿ã‚¹ã‚¯å¾…æ©Ÿä¸­...ã€ã®ã¾ã¾

**ç¢ºèªäº‹é …**:
1. Renderã®ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã¦ã„ã‚‹ã‹
   - https://dashboard.render.com ã§ç¢ºèª
2. RENDER_API_URLãŒæ­£ã—ã„ã‹
   - `.env.worker` ã®è¨­å®šã‚’ç¢ºèª
3. Renderã§ã‚¿ã‚¹ã‚¯ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹
   - https://create-cut-out-videos.onrender.com/api/tasks/list ã«ã‚¢ã‚¯ã‚»ã‚¹

### Q4: ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**:
```
RuntimeError: [enforce fail at alloc_cpu.cpp:114] data
```

**è§£æ±º**:
- Whisperã®ãƒ¢ãƒ‡ãƒ«ã‚’å°ã•ãã™ã‚‹:
  ```python
  # local_worker.py ã® 151è¡Œç›®ã‚ãŸã‚Š
  transcript = subtitle_gen.transcribe_audio(str(combined_path), model='tiny', language='ja')  # base â†’ tiny
  ```

### Q5: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒé…ã„/å¤±æ•—ã™ã‚‹

**å¯¾ç­–**:
1. yt-dlpã‚’æœ€æ–°ç‰ˆã«æ›´æ–°:
   ```bash
   pip install --upgrade yt-dlp
   ```

2. åˆ¥ã®å‹•ç”»ã§ãƒ†ã‚¹ãƒˆ:
   - çŸ­ã„å‹•ç”»ï¼ˆ3-5åˆ†ï¼‰ã‚’é¸æŠ

---

## ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª

### ã‚¿ã‚¹ã‚¯ä¸€è¦§ã‚’ç¢ºèª
```bash
curl https://create-cut-out-videos.onrender.com/api/tasks/list
```

### çµ±è¨ˆæƒ…å ±ã‚’ç¢ºèª
```bash
curl https://create-cut-out-videos.onrender.com/api/status
```

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- âœ… Phase 1: Renderã‚¿ã‚¹ã‚¯ç®¡ç†API â†’ **å®Œäº†**
- âœ… Phase 2: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— â†’ **ã“ã®ã‚¬ã‚¤ãƒ‰ã‚’å‚ç…§**
- â³ Phase 3: Google Driveé€£æº â†’ æ¬¡å›å®Ÿè£…
- â³ Phase 4: è‡ªå‹•ç›£è¦–ã®è¨­å®š

---

è³ªå•ãŒã‚ã‚Œã°ã€GitHub Issuesã¾ãŸã¯ã‚µãƒãƒ¼ãƒˆã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ï¼ ğŸš€
